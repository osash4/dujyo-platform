import{j as e,m as t,D as a,T as s,U as r,Z as i,w as n,k as o,x as l,A as c,y as d,i as x,g as m,C as u,c as h,z as g}from"./ui-vendor-4yLfx4M6.js";import{r as p}from"./react-vendor-B_dnvmrP.js";import{a as y,u as b,b as f}from"./player-DIw-LwkR.js";const v=({icon:a,title:r,value:i,change:o,changeType:l,color:c})=>e.jsxs(t.div,{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 shadow-lg hover:shadow-2xl transition-all duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{scale:1.02,boxShadow:`0 0 30px ${c}30`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.div,{className:"p-2 rounded-lg",style:{backgroundColor:`${c}20`},whileHover:{rotate:360},transition:{duration:.5},children:e.jsx(a,{size:24,style:{color:c}})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:r})]}),e.jsxs(t.div,{className:"flex items-center gap-1 text-sm font-medium "+("positive"===l?"text-green-400":"text-red-400"),animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:["positive"===l?e.jsx(s,{size:16}):e.jsx(n,{size:16}),e.jsx("span",{children:o})]})]}),e.jsx(t.p,{className:"text-4xl font-bold text-white mb-2",animate:{textShadow:[`0 0 10px ${c}50`,`0 0 20px ${c}70`,`0 0 10px ${c}50`]},transition:{duration:3,repeat:1/0},children:i}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Last 24 Hours"})]}),j=()=>{const[a,r]=p.useState([]),[i,n]=p.useState(!0);return p.useEffect(()=>{const e=async()=>{try{n(!0);const e=await fetch("/api/blockchain/price-history");if(e.ok){const t=await e.json();r(t.prices||[])}else{const e=await fetch("http://localhost:8083/blocks");if(e.ok){const t=(await e.json()).blocks.slice(-30).map((e,t)=>2.45+.1*(parseInt(e.hash,16)/1e6)+.05*(e.timestamp%1e3/1e3)+.01*t);r(t)}else r([])}}catch(e){r([])}finally{n(!1)}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]),e.jsxs(t.div,{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-cyan-400/30 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-cyan-400 flex items-center gap-2",children:[e.jsx(s,{size:24}),"XWV Trading Activity"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(t.div,{className:"w-2 h-2 bg-green-400 rounded-full",animate:{opacity:[1,.3,1]},transition:{duration:1.5,repeat:1/0}}),e.jsx("span",{children:"Blockchain Connected"})]})]}),e.jsx("div",{className:"relative h-64 bg-gray-900/50 rounded-lg p-4 overflow-hidden",children:i?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-cyan-400 text-lg",children:"Loading blockchain data..."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[Array.from({length:5}).map((t,a)=>e.jsx("div",{className:"absolute w-full h-px bg-cyan-400",style:{top:25*a+"%"}},a)),Array.from({length:6}).map((t,a)=>e.jsx("div",{className:"absolute h-full w-px bg-cyan-400",style:{left:20*a+"%"}},a))]}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[e.jsx(t.path,{d:a.map((e,t)=>`${0===t?"M":"L"} ${t/(a.length-1)*100} ${100-(e-Math.min(...a))/(Math.max(...a)-Math.min(...a))*80}`).join(" "),fill:"none",stroke:"url(#gradient)",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeInOut"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00F6FF"}),e.jsx("stop",{offset:"50%",stopColor:"#39FF14"}),e.jsx("stop",{offset:"100%",stopColor:"#FF2E92"})]})})]}),e.jsxs(t.div,{className:"absolute top-4 right-4 bg-gray-800/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-cyan-400/30",animate:{boxShadow:["0 0 10px rgba(0, 246, 255, 0.3)","0 0 20px rgba(0, 246, 255, 0.5)","0 0 10px rgba(0, 246, 255, 0.3)"]},transition:{duration:2,repeat:1/0},children:[e.jsx("div",{className:"text-cyan-400 font-bold text-lg",children:"Pre-Launch"}),e.jsx("div",{className:"text-green-400 text-sm",children:"Trading Soon"})]})]})})]})},w=()=>{const[a,s]=p.useState([]),[r,i]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("jwt_token");if(!e)throw new Error("No authentication token found");const t=await fetch("http://localhost:8083/dex/top-traders",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to fetch top traders: ${t.status}`);const a=await t.json(),r=a.traders?.map((e,t)=>({rank:t+1,name:e.address?`${e.address.slice(0,6)}...${e.address.slice(-4)}`:`Trader${t+1}`,volume:`$${(e.volume||0).toLocaleString()}`,xp:e.xp||0,avatar:["ðŸ‹","âš¡","ðŸ¤–","ðŸ”®","ðŸŒ"][t]||"ðŸ‘¤"}))||[];s(r)}catch(e){s([])}finally{i(!1)}})()},[]),e.jsxs(t.div,{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-pink-400/30 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-pink-400 flex items-center gap-2",children:[e.jsx(o,{size:24}),"Top Traders"]}),e.jsx("span",{className:"text-sm text-gray-400",children:"24h Volume"})]}),e.jsx("div",{className:"space-y-3",children:r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-400 mx-auto"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Cargando traders reales..."})]}):0===a.length?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:"No hay datos de traders disponibles"})}):a.map((a,s)=>e.jsxs(t.div,{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg border border-gray-600/30 hover:border-pink-400/50 transition-all duration-300",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*s},whileHover:{scale:1.02},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-r from-pink-400 to-purple-500 text-white font-bold text-sm",children:a.rank}),e.jsx("div",{className:"text-2xl",children:a.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-semibold",children:a.name}),e.jsxs("div",{className:"text-gray-400 text-sm",children:[a.xp.toLocaleString()," XP"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-pink-400 font-semibold",children:a.volume}),e.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 text-sm",children:[e.jsx(l,{size:12}),e.jsxs("span",{children:["Level ",Math.floor(a.xp/1e3)]})]})]})]},a.rank))})]})},N=()=>{const[n,o]=p.useState({totalValueLocked:0,volume24h:0,activeUsers:0,transactions:0}),[l,c]=p.useState(!0);p.useEffect(()=>{const e=async()=>{try{c(!0);const[e,t]=await Promise.all([fetch("http://localhost:8083/blocks"),fetch("http://localhost:8083/pools")]);let a=0,s=0,r=0,i=0,n=null;if(e.ok){n=await e.json(),i=n.blocks?.length||0;const t=n.blocks?.slice(-100)||[],a=new Set;t.forEach(e=>{e.transactions&&e.transactions.forEach(e=>{e.from&&a.add(e.from),e.to&&a.add(e.to)})}),r=a.size}if(t.ok){const e=await t.json();e.pools&&(a=e.pools.reduce((e,t)=>e+(t.reserve0||0)+(t.reserve1||0),0))}if(n){s=(n.blocks?.slice(-24)||[]).reduce((e,t)=>t.transactions?e+t.transactions.reduce((e,t)=>e+(t.amount||0),0):e,0)}o({totalValueLocked:a,volume24h:s,activeUsers:r,transactions:i})}catch(e){}finally{c(!1)}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const d=(e,t="")=>e>=1e6?`$${(e/1e6).toFixed(1)}M${t}`:e>=1e3?`$${(e/1e3).toFixed(1)}K${t}`:`$${e.toFixed(0)}${t}`;return e.jsxs("div",{className:"space-y-8",children:[e.jsx(t.h2,{className:"text-4xl font-bold text-white text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsx("span",{className:"bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent",children:"DEX Overview"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(v,{icon:a,title:"Total Value Locked",value:l?"Loading...":d(n.totalValueLocked),change:"+5.2%",changeType:"positive",color:"#00F6FF"}),e.jsx(v,{icon:s,title:"24h Volume",value:l?"Loading...":d(n.volume24h),change:"-1.8%",changeType:"negative",color:"#39FF14"}),e.jsx(v,{icon:r,title:"Active Users",value:l?"Loading...":`${n.activeUsers}`,change:"+12.5%",changeType:"positive",color:"#FF2E92"}),e.jsx(v,{icon:i,title:"Transactions",value:l?"Loading...":`${n.transactions}`,change:"+7.1%",changeType:"positive",color:"#FFD700"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(j,{}),e.jsx(w,{})]}),e.jsxs(t.div,{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-200 mb-6 flex items-center gap-2",children:[e.jsx(i,{size:24,className:"text-yellow-400"}),"Recent Activity"]}),e.jsx("div",{className:"space-y-3",children:[{type:"swap",user:"CryptoWhale",amount:"1,000 XWAVE",time:"2m ago",color:"#39FF14"},{type:"liquidity",user:"NeonTrader",amount:"Added $50K",time:"5m ago",color:"#FF2E92"},{type:"swap",user:"CyberPunk",amount:"500 USDC",time:"8m ago",color:"#39FF14"},{type:"liquidity",user:"QuantumSwap",amount:"Removed $25K",time:"12m ago",color:"#FF2E92"}].map((a,s)=>e.jsxs(t.div,{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg border border-gray-600/30",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*s},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-semibold",children:a.user}),e.jsx("div",{className:"text-gray-400 text-sm",children:"swap"===a.type?"Swapped":"Liquidity"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white font-semibold",children:a.amount}),e.jsx("div",{className:"text-gray-400 text-sm",children:a.time})]})]},s))})]})]})},k=({show:a,newBalance:r,previousBalance:i,onClose:n})=>{const[o,l]=p.useState(!1);p.useEffect(()=>{if(a){l(!0);const e=setTimeout(()=>{l(!1),setTimeout(n,300)},3e3);return()=>clearTimeout(e)}},[a,n]);const x=r-i,m=x>0;return e.jsx(c,{children:o&&e.jsx(t.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:"fixed top-4 right-4 z-50 bg-gray-800/95 backdrop-blur-lg border border-gray-600/50 rounded-xl p-4 shadow-2xl max-w-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.div,{className:"p-2 rounded-full "+(m?"bg-green-500/20":"bg-red-500/20"),animate:{rotate:[0,360]},transition:{duration:.5},children:m?e.jsx(s,{className:"w-5 h-5 text-green-400"}):e.jsx(d,{className:"w-5 h-5 text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-sm",children:"Balance Updated"}),e.jsxs("p",{className:"text-gray-300 text-xs",children:[m?"+":"",x.toFixed(2)," XWV"]}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["New balance: ",r.toFixed(2)," XWV"]})]}),e.jsx(t.button,{onClick:()=>{l(!1),setTimeout(n,300)},className:"text-gray-400 hover:text-white transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:"Ã—"})]})})})},S=({label:a,value:s,onChange:r,token:i,onMax:n,balance:o,color:l})=>e.jsxs(t.div,{className:"bg-gray-800/30 backdrop-blur-lg rounded-xl p-4 mb-4 border border-gray-600/30 hover:border-gray-500/50 transition-all duration-300",whileHover:{scale:1.01},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-gray-300 text-sm font-medium",children:a}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs("span",{className:"text-gray-400 text-xs",children:["Balance: ",o]}),n&&e.jsx(t.button,{onClick:n,className:"text-cyan-400 text-sm font-medium hover:text-cyan-300 transition-colors px-2 py-1 rounded hover:bg-cyan-400/10",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Max"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"flex-grow bg-transparent text-white text-2xl font-bold outline-none placeholder-gray-500",placeholder:"0.0",value:s,onChange:r}),e.jsxs(t.div,{className:"flex items-center gap-2 bg-gray-700/50 rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-600/50 transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${l}, ${l}80)`,boxShadow:`0 0 10px ${l}50`},children:e.jsx("span",{className:"text-white font-bold text-xs",children:i.substring(0,2).toUpperCase()})}),e.jsx("span",{className:"text-white font-semibold",children:i}),e.jsx(g,{size:16,className:"text-gray-400"})]})]})]}),T=()=>{const[a,s]=p.useState(""),[r,n]=p.useState(""),[o,l]=p.useState("XWV"),[d,g]=p.useState("USXWV"),[v,j]=p.useState(!1),[w,N]=p.useState(!1),[T,F]=p.useState(""),[$,E]=p.useState(""),{available_xwv:C,usxwv:V,isUpdating:X,refreshBalance:W}=y(),[A,P]=p.useState(!1),[z,U]=p.useState(""),[H,L]=p.useState(""),[I,M]=p.useState(!1),[O,B]=p.useState(""),[_,J]=p.useState(""),[q,R]=p.useState(!1),[D,K]=p.useState(0),{user:Q}=b(),{account:Y}=f(),G=async()=>{try{K(C),await W(),R(!0)}catch(e){}};p.useEffect(()=>{if(a&&!isNaN(parseFloat(a))){const e=((e,t)=>"XWV"===t||"USXWV"===t?(1*e).toFixed(2):"0.00")(parseFloat(a),o);n(e)}else n("")},[a,o]);const Z=e=>{switch(e){case"XWV":return"#00F6FF";case"USXWV":return"#39FF14";case"ETH":return"#8B5CF6";default:return"#FF2E92"}};return e.jsxs(t.div,{className:"relative bg-gray-900/70 backdrop-blur-lg rounded-3xl p-8 border border-green-400/30 shadow-2xl max-w-md w-full",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},style:{boxShadow:"0 0 50px rgba(57, 255, 20, 0.2), 0 0 100px rgba(57, 255, 20, 0.1)"},children:[e.jsx(c,{children:w&&e.jsx(t.div,{className:"absolute inset-0 rounded-3xl pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-400/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:.8,ease:"easeInOut"}})})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Swap Tokens"}),e.jsx(t.button,{className:"p-2 text-gray-400 hover:text-white transition-colors",whileHover:{rotate:180},transition:{duration:.3},children:e.jsx(x,{size:20})})]}),e.jsx(S,{label:"You pay",value:a,onChange:e=>s(e.target.value),token:o,onMax:()=>s("XWV"===o?C.toString():V.toString()),balance:X?"Loading...":"XWV"===o?`${C.toFixed(2)} XWV`:`${V.toFixed(2)} USXWV`,color:Z(o)}),e.jsx("div",{className:"flex justify-center my-4",children:e.jsx(t.button,{onClick:()=>{l(d),g(o),s(r),n(a)},className:"p-3 bg-gray-700/70 rounded-full border border-gray-600/50 text-gray-300 hover:text-green-400 hover:border-green-500 transition-all duration-300 relative",whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},style:{boxShadow:"0 0 20px rgba(57, 255, 20, 0.3)"},children:e.jsx(m,{size:20})})}),e.jsx(S,{label:"You receive",value:r,onChange:e=>n(e.target.value),token:d,balance:X?"Loading...":"XWV"===d?`${C.toFixed(2)} XWV`:`${V.toFixed(2)} USXWV`,color:Z(d)}),e.jsxs(t.div,{className:"flex justify-between items-center text-gray-400 text-sm mb-6 p-3 bg-gray-800/30 rounded-lg",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("span",{children:"Exchange Rate"}),e.jsxs("span",{className:"text-white font-semibold",children:["1 ",o," = 1.0 ",d]})]}),e.jsxs(t.button,{className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-4 rounded-xl text-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg relative overflow-hidden",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{if(!Q||!Y)return void F("Please connect your wallet first");if(!a||parseFloat(a)<=0)return void F("Please enter a valid amount");const e=parseFloat(a);if("XWV"===o&&e>C)return void F(`Insufficient XWV balance. Available: ${C.toFixed(2)} XWV`);if("USXWV"===o&&e>V)return void F(`Insufficient USXWV balance. Available: ${V.toFixed(2)} USXWV`);const t=new AbortController,s=setTimeout(()=>t.abort(),3e4);j(!0),N(!0),F("");try{const e=localStorage.getItem("jwt_token");if(!e)throw new Error("No authentication token found");const i=e=>.98*e,l={from:o,to:d,amount:parseFloat(a),min_received:i(parseFloat(r)),user:Q?.uid||Y},c=await fetch("http://localhost:8083/swap",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(l),signal:t.signal});if(clearTimeout(s),!c.ok){if(401===c.status)throw new Error("Authentication failed. Please login again.");throw new Error(`HTTP ${c.status}: ${c.statusText}`)}const x=await c.json();x.success?(F(`Swap successful! Transaction: ${x.tx_hash}`),E(x.tx_hash),x.amount_received&&n(x.amount_received.toString()),await G()):x.message&&x.message.includes("Insufficient output amount")?F("Price updated. Please try the swap again."):F(`Swap failed: ${x.message}`)}catch(i){clearTimeout(s),i instanceof Error&&"AbortError"===i.name?F("Request was cancelled or timed out. Please try again."):i instanceof Error&&i.message.includes("Insufficient output amount")?F("Price updated. Please try the swap again."):F(`Error: ${i instanceof Error?i.message:"Unknown error"}`)}finally{j(!1),setTimeout(()=>{N(!1)},2e3)}},disabled:v,style:{boxShadow:"0 0 30px rgba(57, 255, 20, 0.5)"},children:[e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}),e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(t.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(i,{size:20})}),"Swapping..."]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{size:20}),"Confirm Swap"]})})]}),T&&e.jsx(t.div,{className:"mt-4 p-3 rounded-lg text-sm font-medium "+(T.includes("Success")?"bg-green-500/20 text-green-400 border border-green-500/50":"bg-red-500/20 text-red-400 border border-red-500/50"),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:T}),$&&e.jsx(t.div,{className:"mt-2 p-2 bg-gray-800/50 rounded-lg text-xs text-gray-400",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"font-mono break-all",children:["TX: ",$]})}),e.jsxs(t.div,{className:"mt-8 p-6 bg-gray-800/30 backdrop-blur-lg rounded-xl border border-gray-600/30",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(u,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Staking"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Amount to Stake (XWV)"}),e.jsx("input",{type:"number",value:z,onChange:e=>U(e.target.value),placeholder:"0.0",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400"}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["Available: ",C.toFixed(2)," XWV"]}),e.jsx("button",{onClick:()=>U(C.toString()),className:"text-xs text-yellow-400 hover:text-yellow-300 transition-colors",children:"Max"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(t.button,{onClick:async()=>{if(!Q||!Y)return void L("Please connect your wallet first");if(!z||isNaN(parseFloat(z)))return void L("Please enter a valid amount");const e=parseFloat(z);if(e<=0)return void L("Amount must be greater than 0");if(e>C)return void L("Insufficient balance for staking");const t=new AbortController,a=setTimeout(()=>t.abort(),3e4);try{P(!0),L("");const r=localStorage.getItem("jwt_token");if(!r)throw new Error("No authentication token found");const i=await fetch("http://localhost:8083/stake",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({account:Q.uid,amount:e}),signal:t.signal});if(clearTimeout(a),!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);let n;try{const e=await i.text();n=""===e.trim()?{success:!1,message:"Empty response from server"}:JSON.parse(e)}catch(s){n={success:!1,message:"Invalid JSON response from server"}}n.success?(L(`${n.message}`),U(""),await G()):L(`${n.message}`)}catch(r){clearTimeout(a),r instanceof Error&&"AbortError"===r.name?L("Request was cancelled or timed out. Please try again."):L(`Error: ${r instanceof Error?r.message:"Unknown error"}`)}finally{P(!1)}},disabled:A||!z,className:"bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold py-3 rounded-lg hover:from-yellow-400 hover:to-orange-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:A?"Staking...":"Stake XWV"}),e.jsx(t.button,{onClick:async()=>{if(!Q||!Y)return void L("Please connect your wallet first");if(!z||isNaN(parseFloat(z)))return void L("Please enter a valid amount");const e=parseFloat(z);if(e<=0)return void L("Amount must be greater than 0");const t=new AbortController,a=setTimeout(()=>t.abort(),3e4);try{P(!0),L("");const r=localStorage.getItem("jwt_token");if(!r)throw new Error("No authentication token found");const i=await fetch("http://localhost:8083/unstake",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({account:Q.uid,amount:e}),signal:t.signal});if(clearTimeout(a),!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);let n;try{const e=await i.text();n=""===e.trim()?{success:!1,message:"Empty response from server"}:JSON.parse(e)}catch(s){n={success:!1,message:"Invalid JSON response from server"}}n.success?(L(`${n.message}`),U(""),await G()):L(`${n.message}`)}catch(r){clearTimeout(a),r instanceof Error&&"AbortError"===r.name?L("Request was cancelled or timed out. Please try again."):L(`Error: ${r instanceof Error?r.message:"Unknown error"}`)}finally{P(!1)}},disabled:A||!z,className:"bg-gradient-to-r from-red-500 to-pink-600 text-white font-bold py-3 rounded-lg hover:from-red-400 hover:to-pink-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:A?"Unstaking...":"Unstake XWV"})]}),H&&e.jsx(t.div,{className:"p-3 rounded-lg text-sm font-medium "+(H.includes("Success")?"bg-green-500/20 text-green-400 border border-green-500/50":"bg-red-500/20 text-red-400 border border-red-500/50"),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:H})]})]}),e.jsxs(t.div,{className:"mt-8 p-6 bg-gray-800/30 backdrop-blur-lg rounded-xl border border-gray-600/30",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(i,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Mint Tokens"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Amount to Mint (XWV)"}),e.jsx("input",{type:"number",value:O,onChange:e=>B(e.target.value),placeholder:"0.0",max:"10000",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-blue-400 focus:ring-1 focus:ring-blue-400"}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Max: 10,000 XWV per mint"}),e.jsx("button",{onClick:()=>B("1000"),className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Quick: 1000"})]})]}),e.jsx(t.button,{onClick:async()=>{if(!Q||!Y)return void J("Please connect your wallet first");if(!O||isNaN(parseFloat(O)))return void J("Please enter a valid amount");const e=parseFloat(O);if(e<=0)return void J("Amount must be greater than 0");if(e>1e4)return void J("Maximum mint amount is 10,000 XWV");const t=new AbortController,a=setTimeout(()=>t.abort(),3e4);try{M(!0),J("");const s=localStorage.getItem("jwt_token");if(!s)throw new Error("No authentication token found");const r=await fetch("http://localhost:8083/mint",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({account:Q.uid,amount:e}),signal:t.signal});if(clearTimeout(a),!r.ok){const e=await r.json();throw new Error(e.message||"Failed to mint tokens")}await r.json();J(`Successfully minted ${e} XWV tokens!`),B(""),await G()}catch(s){clearTimeout(a),s instanceof Error&&"AbortError"===s.name?J("Request was cancelled or timed out. Please try again."):J(`Error: ${s instanceof Error?s.message:"Unknown error"}`)}finally{M(!1)}},disabled:I||!O,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 rounded-lg hover:from-blue-400 hover:to-purple-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:I?"Minting...":"Mint XWV Tokens"}),_&&e.jsx(t.div,{className:"p-3 rounded-lg text-sm font-medium "+(_.includes("Success")?"bg-green-500/20 text-green-400 border border-green-500/50":"bg-red-500/20 text-red-400 border border-red-500/50"),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:_})]})]}),e.jsxs("div",{className:"flex justify-center mt-6 space-x-4",children:[e.jsxs(t.button,{className:"flex items-center gap-2 text-gray-400 text-sm hover:text-green-400 transition-colors",whileHover:{scale:1.05},children:[e.jsx(h,{size:16}),e.jsx("span",{children:"View Chart"})]}),e.jsxs(t.button,{className:"flex items-center gap-2 text-gray-400 text-sm hover:text-green-400 transition-colors",whileHover:{scale:1.05},children:[e.jsx(x,{size:16}),e.jsx("span",{children:"Settings"})]})]}),e.jsx(k,{show:q,newBalance:C,previousBalance:D,onClose:()=>R(!1)})]})};export{N as D,T as a};
